#! /bin/bash
#
# This script was automatically generated by `trmnlp init` but it's yours to modify!
# Use this opportunity to set up environment variables, install dependencies, etc.
#

if command -v trmnlp &> /dev/null
then
    trmnlp "$@"
    exit
fi

# Determine XDG config directory on host OS
if [ -n "$XDG_CONFIG_HOME" ]; then
    CONFIG_DIR="$XDG_CONFIG_HOME/trmnlp"
else
    CONFIG_DIR="$HOME/.config/trmnlp"
fi

if [ ! -d "$CONFIG_DIR" ]; then
    mkdir -p "$CONFIG_DIR"
fi

if command -v docker &> /dev/null
then
    docker run \
        -it \
        --rm \
        --publish 4567:4567 \
        --volume "$(pwd):/plugin" \
        --volume "$CONFIG_DIR:/root/.config/trmnlp" \
        trmnl/trmnlp "$@"
    exit
fi

echo "Install the trmnl_preview gem:

  gem install trmnl_preview

Or install Docker:

    https://docs.docker.com/get-docker/"

exit 1
